!function($,window,document,undefined){function formatElementStr(a,b,c){var d,e;if(null!=a){if(d=" ",null!=b&&b.length>0)for(e=0;e<b.length;e++)b[e][0]&&b[e][1]&&(d+=propstr.format(b[e][0],b[e][1]));return elmtstr.format(a,d,c||"")}return""}function readObjvalue(a,b){return null!=a&&a!=undefined&&b!=undefined&&""!=b?a[b]:void 0}function refreashSortTable(a){serial.enable&&generateIndex(a,serial.serialColumnIndex),sortconf.enable&&a.trigger("updateAll"),generateRank(a)}function generateIndex(a,b){a.find("tbody tr").each(function(a,c){var d=formatElementStr("td",[],initSortIndexByOrder(a));$(c).find("td:eq("+b+")").before(d)})}function initSortIndexByOrder(a){return"asc"==serial.order?a+1:"desc"==serial.order?trcount-a:void 0}function initSortIndexByInverse(a){return"inverse"==serial.type&&serial.inverseOrder==sortconf.corder?trcount-a:a+1}function refreashBodyIndex(a,b){a.find("tbody tr").each(function(a,c){$(c).find("td:eq("+b+")").html(initSortIndexByInverse(a))})}function generateIndexHeader(a,b,c,d){var e=[["rowspan",c]],f=formatElementStr("th",e,b);a.find("thead tr th:eq("+d+")").before(f)}function generateRank(a){sortconf.rank&&a.find("tbody tr").each(function(a,b){$(b).attr("title",sortconf.rankdesc+initSortIndexByInverse(a))})}function containStrCount(a,b){var c=new RegExp(b,"g"),d=a.match(c);return d?d.length:0}function isStartWith(a,b){return a&&b?0==a.indexOf(b)?!0:!1:!1}var tmpHeaderList,tmpLeafList,switchColumnsList,TheAnaLyze,theTableIns,headerList=new Array,leafList=new Array,anaList=new Array,trcount=0,morethan17=!0,sortconf={},elmtstr="<{0} {1}>{2}</{0}>",propstr=' {0}="{1}" ',serial={},TheTable=function(a){this.columConfig={treecode:"treeCode",level:"level",isleaf:"isleaf",showname:"name",desc:"headDesc",datacolumn:"reportColumnName",thstyle:"cssstyle",transcomp:"transcomp"},this.descConfig={enable:!1,desc_type:"div",d_target_id:"",css_out:"descdivdefault_out",css_in:"descdivdefault_in",css_title:"ttitle",css_content:"content",css_close:"close",showevent:"click",hideevent:"",position:"fly",pos_x:10,pos_y:10,desc_th_class:""},this.cssConfig={table:"",caption:"",tr:"",th:"",datatr:"",td:""},this.sort={enable:!1,headerTemplate:"{content} {icon}",rank:!1,widgets:["uitheme"],sortInitialOrder:"desc",rankdesc:"当前排名:"},this.serial={enable:1,type:"inverse",inverseOrder:"asc",order:"asc",serialColumnName:"排名",serialColumnIndex:0},this.defaults={laynum:1,startlay:1,headJson:null,dataJson:null,caption:"",debug:!1,outspanid:"",datamulti:0,tableid:"tableid",needsort:!1,thstyle:!1,descConfig:this.descConfig,sort:this.sort,serial:this.serial,colConfig:this.columConfig,cssConfig:this.cssConfig},this.tablestr={prefix:"autohead_",split:":<br/>",caption:"caption",head:"thead",body:"tbody",tr:"tr",th:"th",td:"td",span:"span",div:"div","class":"class",id:"id",border:"b",name:"name",desc:"desc",style:"style",cols:"colspan",rows:"rowspan",title:"title",elmtstr:"<{0} {1}>{2}</{0}>",propstr:' {0}="{1}" ',closespan:'<span class="{0}"><b>&times;</b></span>',morethan17:!0,debuginfo:"数据列数为{0}，数据量为{1}条，总共消耗时间为：{2}毫秒，表头生成消耗时间为{3}毫秒。"},this.options=$.extend(!0,{},this.defaults,a),this.initJqversion()};TheTable.prototype={initJqversion:function(){var a=$.fn.jquery.replace(/[.]/g,"");Number(a)<Number("1.7.0".replace(/[.]/g,""))&&(this.tablestr.morethan17=!1,morethan17=!1)},initTable:function(){var b,c,d,e,f,a=new Date;this.initVarible(),b=$("#"+this.options.tableid),this.initTableHeader(b),c=new Date,this.initTableData(b),d=new Date,e=d.getTime()-a.getTime(),f=c.getTime()-a.getTime(),this.options.debug&&$("#"+this.options.outspanid).html(this.tablestr.debuginfo.format(leafList.length,trcount,e,f)),serial.enable&&this.initSerial(b),this.options.sort.enable&&this.initSort(b)},initSerial:function(a){generateIndexHeader(a,serial.serialColumnName,this.options.laynum,serial.serialColumnIndex),generateIndex(a,serial.serialColumnIndex),this.options.sort.headers={0:{sorter:!1}}},initSort:function(a){a.tablesorter(this.options.sort),a.trigger("updateAll"),generateRank(a),a.bind("sortEnd",function(){sortconf.corder=$.tablesorter.getCurrentOrder(),generateRank(a),refreashBodyIndex(a,serial.serialColumnIndex,serial.type)})},initVarible:function(){headerList=new Array,leafList=new Array,anaList=new Array,trcount=0,serial=this.options.serial,sortconf=this.options.sort},initTableHeader:function(a){this.initTableElement(a),this.readHeaderLeafList(),this.initHeaderList(),this.writeHeader(a,headerList),this.initDescDiv(a)},initTableData:function(a){this.writeTableData(a)},writeTableData:function(){var b,c;leafList.length>0&&(this.options.needsort&&this.sortArray(leafList),b=this,c="",$.each(this.options.dataJson,function(a,d){var e,f,g,h,i,j,k;if(d){for(e="",f=0;f<leafList.length;f++)g=b.readObjDymValue(d,leafList[f][2])||"",h=b.options.cssConfig.td?[[b.tablestr.class,b.options.cssConfig.td]]:[],i=b.formatElementStr(b.tablestr.td,h,g),e+=i;j=b.options.cssConfig.datatr?[[b.tablestr.class,b.options.cssConfig.datatr]]:[],k=b.formatElementStr(b.tablestr.tr,j,e),c+=k,trcount++}}),this.options.debug&&this.options.datamulti>0&&(trtmp=c,trcount*=this.options.datamulti,c=Array(this.options.datamulti+1).join(trtmp)),$("#"+this.tablestr.prefix+this.tablestr.body).append(c))},initInputBody:function(){$.each(leafList,function(){})},initTableElement:function(a){a.empty(),this.options.cssConfig.table&&a.prop(this.tablestr.class,this.options.cssConfig.table),this.options.caption&&a.append(this.formatElementStr(this.tablestr.caption,[[this.tablestr.class,this.options.cssConfig.caption||""]],this.options.caption)),0==a.find(this.tablestr.head).length&&a.append(this.formatElementStr(this.tablestr.head,[[this.tablestr.id,this.tablestr.prefix+this.tablestr.head]])),0==a.find(this.tablestr.body).length&&a.append(this.formatElementStr(this.tablestr.body,[[this.tablestr.id,this.tablestr.prefix+this.tablestr.body]]))},initHeaderList:function(){for(var a=this.options.startlay;a<this.options.startlay+this.options.laynum;a++)headerList.push([]),this.readHeaderJsonToLevelList(a)},readHeaderLeafList:function(){var a=this;$.each(this.options.headJson,function(b,c){if("Y"==c.isleaf){var d=[a.readObjDymValue(c,a.options.colConfig.treecode),a.readObjDymValue(c,a.options.colConfig.showname),a.readObjDymValue(c,a.options.colConfig.datacolumn),a.readObjDymValue(c,a.options.colConfig.transcomp)];leafList.push(d)}})},readHeaderJsonToLevelList:function(a){var b=this;$.each(this.options.headJson,function(c,d){var e,f,g,h,i,j,k;d&&(e=b.readObjDymValue(d,b.options.colConfig.level),e==a&&(f=b.readObjDymValue(d,b.options.colConfig.treecode),g=b.readObjDymValue(d,b.options.colConfig.isleaf),h=b.readObjDymValue(d,b.options.colConfig.showname),i=[],i.push([b.tablestr.id,f]),b.options.cssConfig.th&&i.push([b.tablestr.class,b.options.cssConfig.th]),"Y"==g?b.options.laynum>e&&i.push([b.tablestr.rows,b.options.laynum+1-e]):(j=b.readLeafCount(f,leafList),i.push([b.tablestr.cols,0==j?1:j])),b.options.descConfig.enable&&b.readObjDymValue(d,b.options.colConfig.desc)&&(k=b.readObjDymValue(d,b.options.colConfig.desc)||"",b.options.descConfig.enable&&"title"==b.options.descConfig.desc_type?h=b.formatElementStr(b.tablestr.span,[[b.tablestr.title,k]],h):i.push([b.tablestr.desc,k])),b.options.thstyle&&i.push([b.tablestr.style,b.readObjDymValue(d,b.options.colConfig.thstyle)]),headerList[a-b.options.startlay].push([f,b.formatElementStr(b.tablestr.th,i,h)])))})},readLeafCount:function(a,b){var c=0,d=this;return $.each(b,function(b,e){d.isStartWith(e[0],a)&&c++}),c},writeHeader:function(a,b){var c,d,e,f,g,h,i;if(b.length>=0){for(c="",d=0;d<this.options.laynum;d++){for(array=b[d],e="",this.options.needsort&&this.sortArray(array),f=0;f<array.length;f++)g=array[f][1],e+=g;h=this.options.cssConfig.tr?[[this.tablestr.class,this.options.cssConfig.tr]]:[],i=this.formatElementStr(this.tablestr.tr,h,e),c+=i}$("#"+this.tablestr.prefix+this.tablestr.head).append(c),a.show()}},isStartWith:function(a,b){return a&&b?0==a.indexOf(b)?!0:!1:!1},sortArray:function(a){a.sort(function(a,b){return a[0]&&b[0]?a[0].localeCompare(b[0]):void 0})},readObjDymValue:function(a,b){return null!=a&&a!=undefined&&b!=undefined&&""!=b?a[b]:void 0},formatElementStr:function(a,b,c){var e,f,d=this;if(null!=a){if(e=" ",null!=b&&b.length>0)for(f=0;f<b.length;f++)e+=d.tablestr.propstr.format(b[f][0],b[f][1]);return d.tablestr.elmtstr.format(a,e,c||"")}return""},initDescDiv:function(a){this.options.descConfig.enable&&"div"==this.options.descConfig.desc_type&&(this.options.descConfig.d_target_id||this.appendDescDiv(a),this.appendDescDivEvent(a))},appendDescDiv:function(a){var b=this.formatElementStr(this.tablestr.div,[[this.tablestr.id,this.tablestr.prefix+this.options.descConfig.css_in],[this.tablestr.class,this.options.descConfig.css_in]]),c=this.formatElementStr(this.tablestr.div,[[this.tablestr.id,this.tablestr.prefix+this.options.descConfig.css_out],[this.tablestr.class,this.options.descConfig.css_out]],b);a.after(c)},appendDescDivEvent:function(a){var b=this;a.find(this.tablestr.th).each(function(){var c,d,a=$(this).attr(b.tablestr.desc);a&&(b.options.descConfig.desc_th_class&&$(this).prop(b.tablestr.class,b.options.descConfig.desc_th_class),b.options.descConfig.d_target_id?(c=$("#"+b.options.descConfig.d_target_id),d=$("#"+b.options.descConfig.d_target_id)):(c=$("#"+b.tablestr.prefix+b.options.descConfig.css_in),d=$("#"+b.tablestr.prefix+b.options.descConfig.css_out)),morethan17?($(this).on(b.options.descConfig.showevent,function(e){b.showDescDiv(c,d,$(this).html(),a,e.pageX,e.pageY)}),$(this).on(b.options.descConfig.hideevent,function(){b.hideDescDiv(d)})):($(this).bind(b.options.descConfig.showevent,function(e){b.showDescDiv(c,d,$(this).html(),a,e.pageX,e.pageY)}),$(this).bind(b.options.descConfig.hideevent,function(){b.hideDescDiv(d)})))})},showDescDiv:function(a,b,c,d,e,f){var h,i,j,g="";this.options.descConfig.d_target_id?(h=this.formatElementStr(this.tablestr.border,[],c+this.tablestr.split),g=h+d):(i=this.tablestr.closespan.format(this.options.descConfig.css_close)+c,h=this.formatElementStr(this.tablestr.div,[[this.tablestr.class,this.options.descConfig.css_title]],i),j=this.formatElementStr(this.tablestr.div,[[this.tablestr.class,this.options.descConfig.css_content]],d),g=h+j),a.html(g),"fly"==this.options.descConfig.position&&b.css({top:f+this.options.descConfig.pos_y,left:e+this.options.descConfig.pos_x}).show(),"absolute"==this.options.descConfig.position&&b.css({top:this.options.descConfig.pos_y,left:this.options.descConfig.pos_x}).show(),!this.options.descConfig.d_target_id&&morethan17&&b.find(this.tablestr.span).on("click",function(){b.hide()}),!this.options.descConfig.d_target_id&&!morethan17&&b.find(this.tablestr.span).bind("click",function(){b.hide()})},hideDescDiv:function(a){a.hide()}},tmpHeaderList=new Array,tmpLeafList=new Array,switchColumnsList=new Array,TheAnaLyze=function(a){this.tablestr={extremeswitch:{max:">",min:"<"},descswitch:{max:"最大值",min:"最小值",all:"合计值",avg:"平均值"},prefix:"analy_",tr:"tr",th:"th",divide:",",head:"thead",body:"tbody",td:"td",span:"span",caption:"caption",id:"id",border:"b",name:"name",div:"div",desc:"desc",style:"style",title:"title","class":"class",strdivide:"'",transIdPre:"tran_",divPrefix:"autoTrans_",split:":<br/>",closespan:'<span class="{0}"><b>&times;</b></span>',elstr:"<{0} {1}>{2}</{0}>",prstr:' {0}="{1}" '},this.compare={enable:!1,followelmt:"span",elmthtml:"",upclass:"moreThanSpan",lowclass:"lessThanSpan",eqclass:"equalToSpan"},this.transcp={titleConfig:{red:"不合格",yellow:"警告"},clzConfig:{red:"lever2",yellow:"lever1"},listDivide:";",conditionDivide:",",columnReference:"#",selfReference:"{this}",count:!0,d_target_id:"",css_out:"descdivdefault_out",css_in:"descdivdefault_in",css_title:"ttitle",css_content:"content",css_close:"close",showevent:"click",hideevent:"",position:"fly",pos_x:-100,pos_y:0},this.transCountCp={enable:!0,tgtTableId:"tabledcnt",table:" table-hover  table-striped table-bordered table-responsive",caption:"分析统计结果",captionstyle:"",title:"类型/单位",rowcol:"rep_org_name",switchenable:!0,switchevent:"click"},this.cssConfig={tr:"",th:"",datatr:"",td:""},this.default={anaJson:null,baseJson:null,tableid:"tableid",anatype:"",returntype:"this",digit:0,descenable:!0,descstr:"",desccol:0,writetotable:!0,writepos:"after",trclass:"",tdclass:"",countJson:[],compare:this.compare,cssConfig:this.cssConfig,transcp:this.transcp,transCountCp:this.transCountCp},this.options=$.extend(!0,{},this.default,a),this.options.baseJson||(this.options.baseJson=this.options.anaJson?this.options.anaJson:[])},TheAnaLyze.prototype={initTableElement:function(a){a.empty(),this.options.transCountCp.table&&a.prop(this.tablestr.class,this.options.transCountCp.table),this.options.transCountCp.caption&&a.append(this.formatElementStr(this.tablestr.caption,[[this.tablestr.class,this.options.transCountCp.captionstyle||""]],this.options.transCountCp.caption)),0==a.find(this.tablestr.head).length&&a.append(this.formatElementStr(this.tablestr.head,[[this.tablestr.id,this.tablestr.prefix+this.tablestr.head]])),0==a.find(this.tablestr.body).length&&a.append(this.formatElementStr(this.tablestr.body,[[this.tablestr.id,this.tablestr.prefix+this.tablestr.body]]))},writeCountTableHeader:function(a){var b=this,c="",d="";c+=this.formatElementStr(this.tablestr.td,[],this.options.transCountCp.title),$.each(this.options.anaJson,function(a,d){var e=readObjvalue(d,b.options.transCountCp.rowcol)||"";c+=b.formatElementStr(b.tablestr.td,[],e)}),d+=this.formatElementStr(this.tablestr.tr,[],c),$("#"+this.tablestr.prefix+this.tablestr.head).append(d),a.show()},writeCountTableData:function(){var b=this,c="";$.each(this.options.transcp.titleConfig,function(a,d){var e="";e+=b.formatElementStr(b.tablestr.td,[],d),$.each(anaList,function(c,d){var f=b.getFitCountFromAnaList(a,d)||"0";e+=b.formatElementStr(b.tablestr.td,[[b.tablestr.desc,c+b.tablestr.divide+a]],f)}),c+=b.formatElementStr(b.tablestr.tr,[],e)}),$("#"+this.tablestr.prefix+this.tablestr.body).append(c)},bindCountTableCell:function(a){var b=this;a.find(this.tablestr.body).find(this.tablestr.td).each(function(){morethan17?$(this).on(b.options.transCountCp.switchevent,function(){b.switchTableByCountCell($(this))}):$(this).bind(b.options.transCountCp.switchevent,function(){b.switchTableByCountCell($(this))})})},switchTableByCountCell:function(a){var c,d,e,f,b=a.attr(this.tablestr.desc);b&&(c=b.split(this.tablestr.divide),c[0]&&c[1]&&(d=switchColumnsList[c[0]][c[1]],d&&(d=d+this.tablestr.divide+this.options.transCountCp.rowcol,this.initTmpLeafFromTransColumns(d),this.initTmpHeaderByTmpLeaf(),e=$("#"+this.options.tableid),theTableIns.initTableElement(e),theTableIns.writeHeader(e,tmpHeaderList),f=new Array,f.push(this.options.anaJson[c[0]]),this.overwriteTransValue(f,tmpLeafList,!1,!1))))},initTmpLeafFromTransColumns:function(a){tmpLeafList=new Array,$.each(leafList,function(b,c){c[2]&&a.indexOf(c[2])>=0&&tmpLeafList.push(c)})},initTmpHeaderByTmpLeaf:function(){var a,b,c,d,e,f,g,h;if(tmpLeafList)for(tmpHeaderList=new Array,a=0;a<headerList.length;a++){for(b=headerList[a],c=[],d=0;d<b.length;d++)e=b[d][0],this.judgeCodeByTmpLeaf(e)&&(f=TheTable.prototype.readLeafCount(e,tmpLeafList),g=b[d][1],h=/colspan="(\d+)"/,g=g.replace(h,'colspan="'+f+'"'),c.push([e,g]));tmpHeaderList.push(c)}},judgeCodeByTmpLeaf:function(a){var b=!1;return $.each(tmpLeafList,function(c,d){return d[0]&&isStartWith(d[0],a)?(b=!0,!1):void 0}),b},getFitCountFromAnaList:function(a,b){var c;return a&&b&&$.each(b,function(b,d){d&&d[0]&&d[2]&&a==d[0]&&(c=d[2])}),c},getAvgList:function(){var d,e,f,g,h,a=new Array,b=new Array,c=this;if(this.options.baseJson&&leafList.length>0)for(a.length=leafList.length,b.length=leafList.length,$.each(this.options.baseJson,function(a,d){var e,f;if(d)for(e=0;e<leafList.length;e++)f=readObjvalue(d,leafList[e][2])||"",c.initAvgListValue($.trim(f),e,b)}),d=0;d<b.length;d++)e=b[d],e&&(f=Number(e[0]),g=Number(e[1]),h=f/g,a[d]=h.toFixed(c.options.digit));return this.initListDesc(a),a},initAvgListValue:function(a,b,c){var d,e,f,g,h;a&&!isNaN(a)&&(d=Number(a),e=c[b],e?(g=Number(e[0]),h=Number(e[1])+1,f=[g+d,h],c[b]=f):(f=[d,1],c[b]=f))},getCountList:function(){var a=new Array,b=this;return this.options.baseJson&&leafList.length>0&&(a.length=leafList.length,$.each(this.options.baseJson,function(c,d){var e,f;if(d)for(e=0;e<leafList.length;e++)f=readObjvalue(d,leafList[e][2])||"",b.initCountListValue($.trim(f),e,a)})),this.initListDesc(a),a},initCountListValue:function(a,b,c){var d,e,f,g;a&&!isNaN(a)&&(d=Number(a),e=c[b],e?(f=Number(e),g=f+d,c[b]=g.toFixed(this.options.digit)):c[b]=d)},getExtremeList:function(){var a=this.tablestr.extremeswitch[this.options.anatype]||!1,b=new Array,c=this;return a&&this.options.baseJson&&leafList.length>0&&(b.length=leafList.length,$.each(this.options.baseJson,function(d,e){var f,g;if(e)for(f=0;f<leafList.length;f++)g=readObjvalue(e,leafList[f][2])||"",c.initExtremeListValue($.trim(g),f,b,a)})),this.initListDesc(b),b},initExtremeListValue:function(value_,index_,List_,compchar){var vlu,listval;value_&&!isNaN(value_)&&(vlu=Number(value_),listval=List_[index_],listval?(listval=Number(listval),eval("vlu"+compchar+"listval")&&(List_[index_]=vlu)):List_[index_]=vlu)},initListDesc:function(a){if(this.options.descenable){var b=this.options.descstr?this.options.descstr:this.tablestr.descswitch[this.options.anatype]||"";a[this.options.desccol]=b}},anaLyzz:function(){var a=this.queryStatList();return this.options.compare.enable&&this.overwriteTbody(a),this.options.writetotable&&this.writeToTable(a,this.options.writepos),refreashSortTable($("#"+this.options.tableid)),"this"==this.options.returntype?"this":"list"==this.options.returntype?a:void 0},transCompare:function(){var a,b;this.overwriteTransValue(this.options.anaJson,leafList,this.options.transcp.count,this.options.transCountCp.switchenable),a=$("#"+this.options.tableid),this.options.transcp.count&&this.initTransCountDiv(a),this.options.transCountCp.enable&&(b=$("#"+this.options.transCountCp.tgtTableId),this.initCountTable(b),this.options.transCountCp.switchenable&&this.bindCountTableCell(b)),refreashSortTable(a)},initCountTable:function(a){this.initTableElement(a),this.writeCountTableHeader(a),this.writeCountTableData(a)},overwriteTransValue:function(a,b,c,d){var e=this,f="";anaList=new Array,$.each(a,function(a,g){var h,i,j,k,l,m,n;if(g){for(h="",c&&anaList.push([]),c&&switchColumnsList.push({}),i=0;i<b.length;i++)j=readObjvalue(g,b[i][2])||"",k=e.options.cssConfig.td?[[e.tablestr.class,e.options.cssConfig.td]]:[],k=e.anaLyzTrans(b[i][3],b[i][1],k,j,g,a,i,b[i][2],c,d),l=e.formatElementStr(e.tablestr.td,k,j),h+=l;m=e.options.cssConfig.datatr?[[e.tablestr.class,e.options.cssConfig.datatr]]:[],n=e.formatElementStr(e.tablestr.tr,m,h),f+=n}}),$("#"+this.options.tableid).find(this.tablestr.body).html(""),$("#"+this.options.tableid).find(this.tablestr.body).append(f)},anaLyzTrans:function(a,b,c,d,e,f,g,h,i,j){var k,l;return a&&(k=this,l=a.split(k.options.transcp.listDivide),$.each(l,function(a,l){var m,n,o;return l&&(m=l.split(k.options.transcp.conditionDivide),m[0]&&m[1]&&k.matchExp(d,m[0],e))?(n=k.options.transcp.clzConfig[m[1]]||"",o=k.tablestr.transIdPre+f+g,c=n?[[k.tablestr.class,n],[k.tablestr.id,o]]:[],i&&k.putTransToList(d,b,o,m[1],anaList[f]),j&&k.putFitColumnToRecord(f,m[1],h,m[0]),!1):void 0})),c},putFitColumnToRecord:function(a,b,c,d){var e=d.indexOf(this.options.transcp.columnReference)>=0?c+this.tablestr.divide+d+this.tablestr.divide:c+this.tablestr.divide,f=readObjvalue(switchColumnsList[a],b);f=f?f+e:e,switchColumnsList[a][b]=f},matchExp:function(theValue,exp,jsonRow){var exp_,result=!1;isNaN(theValue)&&(theValue=this.tablestr.strdivide+theValue+this.tablestr.strdivide),exp_=exp.replace(this.options.transcp.columnReference,"jsonRow."),exp_.indexOf("&&")>=0&&(exp_=exp_.replace("&&","&&"+theValue)),exp_.indexOf("||")>=0&&(exp_=exp_.replace("||","||"+theValue)),exp_=exp_.indexOf(this.options.transcp.selfReference)>=0?exp_.replace(this.options.transcp.selfReference,theValue+"&&"+theValue):theValue+exp_,1==containStrCount(exp_,"=")&&(exp_=exp_.replace("=","=="));try{result=eval(exp_)}catch(exception){console.log(exception)}return result},putTransToList:function(a,b,c,d,e){var f,g,h,i,j;e&&(f=this,g=[b,a,c],h=!0,$.each(e,function(a,b){if(b&&b[0]&&b[0]==d){var c=Number(b[2]);c&&b[3]&&(b[2]=c+1,b[3].push(g),h=!1)}}),h&&(i=f.options.transcp.titleConfig[d]||d,j=[d,i,1,[g]],e.push(j)))},initTransCountDiv:function(a){this.appendTransDiv(a),this.appendTransDivEvent(a)},appendTransDiv:function(a){var b=this.formatElementStr(this.tablestr.div,[[this.tablestr.id,this.tablestr.divPrefix+this.options.transcp.css_in],[this.tablestr.class,this.options.transcp.css_in]]),c=this.formatElementStr(this.tablestr.div,[[this.tablestr.id,this.tablestr.divPrefix+this.options.transcp.css_out],[this.tablestr.class,this.options.transcp.css_out]],b);a.after(c)},appendTransDivEvent:function(a){var b=this;a.find(b.tablestr.td+":nth-child(1)").each(function(a,c){var e,f,d=readObjvalue(b.options.countJson,c.innerHTML)||"情况正常";d&&(b.options.transcp.d_target_id?(e=$("#"+b.options.transcp.d_target_id),f=$("#"+b.options.transcp.d_target_id)):(e=$("#"+b.tablestr.divPrefix+b.options.transcp.css_in),f=$("#"+b.tablestr.divPrefix+b.options.transcp.css_out)),morethan17?($(this).on(b.options.transcp.showevent,function(a){b.showDescDiv(e,f,$(this).html(),d,a.pageX,a.pageY)}),$(this).on(b.options.transcp.hideevent,function(){b.hideDescDiv(f)})):($(this).bind(b.options.transcp.showevent,function(a){b.showDescDiv(e,f,$(this).html(),d,a.pageX,a.pageY)}),$(this).bind(b.options.transcp.hideevent,function(){b.hideDescDiv(f)})))})},showDescDiv:function(a,b,c,d,e,f){var h,i,j,g="";this.options.transcp.d_target_id?(h=this.formatElementStr(this.tablestr.border,[],c+this.tablestr.split),g=h+d):(i=this.tablestr.closespan.format(this.options.transcp.css_close)+c,h=this.formatElementStr(this.tablestr.div,[[this.tablestr.class,this.options.transcp.css_title]],i),j=this.formatElementStr(this.tablestr.div,[[this.tablestr.class,this.options.transcp.css_content]],d),g=h+j),a.html(g),"fly"==this.options.transcp.position&&b.css({top:f+this.options.transcp.pos_y,left:e+this.options.transcp.pos_x}).show(),"absolute"==this.options.transcp.position&&b.css({top:this.options.transcp.pos_y,left:this.options.transcp.pos_x}).show(),!this.options.transcp.d_target_id&&morethan17&&b.find(this.tablestr.span).on("click",function(){b.hide()}),!this.options.transcp.d_target_id&&!morethan17&&b.find(this.tablestr.span).bind("click",function(){b.hide()})},hideDescDiv:function(a){a.hide()},overwriteTbody:function(a){var b=this,c=Number("1E"+this.options.digit),d="";a.length>0&&($.each(this.options.anaJson,function(e,f){var g,h,i,j,k,l,m,n,o;if(f){for(g="",h=0;h<leafList.length;h++)i=readObjvalue(f,leafList[h][2])||"",j=b.compareValue(i,a[h],c),k=b.getCompareClassConfig()[j]||"",i=k?i+b.formatElementStr(b.options.compare.followelmt,[[b.tablestr.class,k]],b.options.compare.elmthtml):i,l=b.options.cssConfig.td?[[b.tablestr.class,b.options.cssConfig.td]]:[],m=b.formatElementStr(b.tablestr.td,l,i),g+=m;n=b.options.cssConfig.datatr?[[b.tablestr.class,b.options.cssConfig.datatr]]:[],o=b.formatElementStr(b.tablestr.tr,n,g),d+=o}}),$("#"+this.options.tableid).find(this.tablestr.body).html(""),$("#"+this.options.tableid).find(this.tablestr.body).append(d))},compareValue:function(a,b,c){var d,e;return a&&b&&(d=parseInt(Number(a)*c),e=Number(b*c),d&&e)?d>e?"up":e>d?"down":d==e?"eq":"":void 0},getCompareClassConfig:function(){var a={max:{eq:this.options.compare.eqclass},min:{eq:this.options.compare.eqclass},avg:{up:this.options.compare.upclass,down:this.options.compare.lowclass,eq:this.options.compare.eqclass}}[this.options.anatype]||"";return a},queryStatList:function(){if(this.options.anatype){var a;return"max"==this.options.anatype||"min"==this.options.anatype?a=this.getExtremeList():"all"==this.options.anatype?a=this.getCountList():"avg"==this.options.anatype&&(a=this.getAvgList()),a}},writeToTable:function(a,b){var d,e,f,g,h,i,c=this;if(a.length>0){for(d="",e=0;e<a.length;e++)f=a[e],g=c.options.tdclass?[[c.tablestr.class,c.options.tdclass]]:[],d+=c.formatElementStr(c.tablestr.td,g,f);h=c.options.trclass?[[c.tablestr.id,c.tablestr.prefix+c.options.anatype],[c.tablestr.class,c.options.trclass]]:[[c.tablestr.id,c.tablestr.prefix+c.options.anatype]],i=c.formatElementStr(c.tablestr.tr,h,d),"after"==b&&$("#"+this.options.tableid).find(this.tablestr.body).find(this.tablestr.tr).last().after(i),"before"==b&&$("#"+this.options.tableid).find(this.tablestr.body).find(this.tablestr.tr).eq(0).before(i)}},isStartWith:function(a,b){return a&&b?0==a.indexOf(b)?!0:!1:!1},formatElementStr:function(a,b,c){var e,f,d=this;if(null!=a){if(e=" ",null!=b&&b.length>0)for(f=0;f<b.length;f++)b[f][0]&&b[f][1]&&(e+=d.tablestr.prstr.format(b[f][0],b[f][1]));return d.tablestr.elstr.format(a,e,c||"")}return""}},String.prototype.format=function(a){var c,d,e,b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a)for(c in a)a[c]!=undefined&&(d=new RegExp("({"+c+"})","g"),b=b.replace(d,a[c]));else for(e=0;e<arguments.length;e++)arguments[e]!=undefined&&(d=new RegExp("({["+e+"]})","g"),b=b.replace(d,arguments[e]));return b},$.fn.autoHeader={init:function(a){return theTableIns=new TheTable(a),theTableIns.initTable(),this},getLeafList:function(){return leafList},anaLyz:function(a){var b=new TheAnaLyze(a),c=b.anaLyzz();return"object"==typeof c?c:this},transCompare:function(a){var b=new TheAnaLyze(a);return b.transCompare(),this}}}(jQuery,window,document);